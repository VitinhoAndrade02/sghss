<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Prontuário</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding-top: 4.5rem; }
    </style>
</head>

<body>
<div th:replace="~{fragments/menu :: menu}"></div>

<div class="container mt-4">

    <h1 th:text="${prontuario.id == null} ? 'Adicionar Prontuário' : 'Editar Prontuário'"></h1>

    <form th:action="@{/prontuarios/salvar}" th:object="${prontuario}" method="post">

        <!-- ids -->
        <input type="hidden" th:field="*{id}" />
        <input type="hidden" th:if="${profissional != null}" th:field="*{profissional.id}" />

        <div class="row">
            <div class="col-6 mb-3">
                <label class="form-label">Paciente</label>
                <select class="form-select" th:field="*{paciente.id}" required>
                    <option value="" disabled>Selecione</option>
                    <option th:each="p : ${pacientes}"
                            th:value="${p.id}"
                            th:text="${p.nome}">
                    </option>
                </select>
            </div>

            <div class="col-6 mb-3">
                <label class="form-label">Data do Registro</label>
                <input type="date"
                       class="form-control"
                       th:field="*{dataRegistro}"
                       required />
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">Descrição</label>
            <textarea class="form-control"
                      th:field="*{descricao}"
                      rows="4"
                      placeholder="Digite a descrição do prontuário">
            </textarea>
        </div>

        <button type="submit"
                class="btn btn-success"
                th:text="${prontuario.id == null} ? 'Salvar' : 'Salvar alterações'">
        </button>

        <a class="btn btn-secondary"
           th:href="@{/prontuarios/profissional/{id}(id=${profissional.id})}">
            Cancelar
        </a>
    </form>

</div>
</body>
</html>
